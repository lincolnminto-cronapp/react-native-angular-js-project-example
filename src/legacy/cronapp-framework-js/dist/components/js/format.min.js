!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof module?module.exports=e():t.format=e()}(this,function(){return function(t,e){"use strict";if(!t||isNaN(+e))return e;var g,n,i,s,u,r=t.length,l=t.search(/[0-9\-\+#]/),c=0<l?t.substring(0,l):"",o=t.split("").reverse().join(""),d=o.search(/[0-9\-\+#]/),f=r-d,a=t.substring(f,1+f),h=f+("."===a||","===a?1:0),a=0<d?t.substring(h,r):"",d=(e="-"===(t=t.substring(l,h)).charAt(0)?-e:+e)<0?e=-e:0,p=(l=t.match(/[^\d\-\+#]/g))&&l[l.length-1]||".",b=l&&l[1]&&l[0]||",";if(t=t.split(p),e=+(e=e.toFixed(t[1]&&t[1].length))+"",s=t[1]&&t[1].lastIndexOf("0"),(!(i=e.split("."))[1]||i[1]&&i[1].length<=s)&&(e=(+e).toFixed(s+1)),s=t[0].split(b),t[0]=s.join(""),-1<(g=t[0]&&t[0].indexOf("0")))for(;i[0].length<t[0].length-g;)i[0]="0"+i[0];else 0==+i[0]&&(i[0]="");if((e=e.split("."))[0]=i[0],n=s[1]&&s[s.length-1].length){for(o="",f=(u=e[0]).length%n,r=u.length,h=0;h<r;h++)o+=u.charAt(h),!((h-f+1)%n)&&h<r-n&&(o+=b);e[0]=o}return e[1]=t[1]&&e[1]?p+e[1]:"",c+((d="0"!==(l=e.join(""))&&""!==l?d:!1)?"-":"")+l+a}});